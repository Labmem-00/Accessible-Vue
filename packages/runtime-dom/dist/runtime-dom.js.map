{
  "version": 3,
  "sources": ["../src/nodeOps.ts", "../src/modules/patchAttr.ts", "../src/modules/patchClass.ts", "../src/modules/patchEvent.ts", "../src/modules/patchStyle.ts", "../src/patchProp.ts", "../../shared/src/index.ts", "../../runtime-core/src/createVNode.ts", "../../runtime-core/src/h.ts", "../../runtime-core/src/seq.ts", "../../reactivity/src/effect.ts", "../../reactivity/src/reactiveEffect.ts", "../../reactivity/src/baseHandlers.ts", "../../reactivity/src/reactive.ts", "../../reactivity/src/ref.ts", "../../reactivity/src/computed.ts", "../../reactivity/src/watch.ts", "../../runtime-core/src/scheduler.ts", "../../runtime-core/src/component.ts", "../../runtime-core/src/renderer.ts", "../src/index.ts"],
  "sourcesContent": ["\r\n\r\n//\u5BF9\u8282\u70B9\u5143\u7D20\u7684\u64CD\u4F5C\r\nexport const nodeOps = {\r\n    insert(el, parent, anchor=null){ //\u53C2\u7167\u7269\u5B58\u5728\u5219\u63D2\u5165\u524D\u9762\r\n        parent.insertBefore(el, anchor || null);\r\n        //\u5982\u679C\u63D2\u5165\u53C2\u7167\u5143\u7D20\u4E0D\u5B58\u5728\uFF0C\u5219\u76F4\u63A5\u63D2\u5165\u7236\u5143\u7D20\u4E2D\r\n        // parent.insertBefore(el, null) === parent.appendChild(el);\r\n    },\r\n    remove(el){\r\n        const parent = el.parentNode;\r\n        if(parent){\r\n            parent.removeChild(el); \r\n        }\r\n    },\r\n    createElement:(type)=>document.createElement(type),\r\n    createText:(text)=>document.createTextNode(text),\r\n    setText:(node,text)=>node.nodeValue = text,\r\n    setElementText:(el, text)=> el.textContent =text,\r\n    parentNode: (node)=>node.parentNode,\r\n    nextSibling: (node)=>node.nextSibling\r\n};", "export default function patchAttr(el:HTMLElement, key, value){\r\n    if(!value || value == null){\r\n        el.removeAttribute(key);\r\n    }else{\r\n        el.setAttribute(key, value);\r\n    }\r\n}\r\n", "export function patchClass(el:Element, value){\r\n    if(value == null){\r\n        el.removeAttribute(\"class\");\r\n    }else{\r\n        el.className=value;\r\n    }\r\n}", "function createInvoker(handle:Function){//\u4E8B\u4EF6\u6267\u884C\u5668\r\n    const invoker = (e)=> invoker.value(e);\r\n    invoker.value = handle;\r\n    return invoker;\r\n}\r\n\r\nexport function patchEvent(el:HTMLElement | any , name:string, nextValue){\r\n    //vue_event_invoker\r\n    const invokers = el._vei || (el._vei = {});\r\n    const eventName = name.slice(2).toLowerCase();\r\n    const exisitInv = invokers[name]; //\u662F\u5426\u5B58\u5728\u540C\u540D\u7684\u4E8B\u4EF6\u7ED1\u5B9A\r\n\r\n    if(nextValue && exisitInv){\r\n        return exisitInv.value = nextValue //\u76F4\u63A5\u6362\u7ED1\u4E8B\u4EF6\r\n    }\r\n    if(nextValue){\r\n        const invoker = (invokers[name] = createInvoker(nextValue));\r\n        return el.addEventListener(eventName, invoker);\r\n    }\r\n\r\n    if(exisitInv){ //\u73B0\u5728\u6CA1\u6709\uFF0C\u4EE5\u524D\u6709\u7684\u4E8B\u4EF6\r\n        el.removeEventListener(eventName, exisitInv);\r\n        invokers[name] = undefined;\r\n    }\r\n}\r\n", "export function patchStyle(el:HTMLElement, preValue, nextValue){\r\n    let style = el.style;\r\n\r\n    for(let key in nextValue){\r\n        style[key] = nextValue[key]; //\u589E\u52A0\u65B0\u6837\u5F0F\r\n    }\r\n\r\n    if(preValue){\r\n        for(let key in preValue){\r\n            if(nextValue){\r\n                if(nextValue[key] == null){ //\u5220\u9664\u4E0D\u5B58\u5728\u7684\u65E7\u6837\u5F0F\r\n                    style[key] = null;\r\n                }\r\n            }\r\n\r\n        }\r\n    }\r\n}\r\n", "//\u5BF9\u8282\u70B9\u5143\u7D20\u7684\u5C5E\u6027\u8FDB\u884C\u64CD\u4F5C\r\n\r\nimport patchAttr from \"./modules/patchAttr\";\r\nimport { patchClass } from \"./modules/patchClass\";\r\nimport { patchEvent } from \"./modules/patchEvent\";\r\nimport { patchStyle } from \"./modules/patchStyle\";\r\n\r\n\r\nexport default function patchProp(el:HTMLElement, key, preValue, nextValue){\r\n    if(key === \"class\"){\r\n        return patchClass(el, nextValue)\r\n    }else if(key === \"style\"){\r\n        return patchStyle(el, preValue, nextValue);\r\n    }else if(/^on[^a-z]/.test(key)){\r\n        return patchEvent(el, key ,nextValue);\r\n    }else{\r\n        return patchAttr(el, key, nextValue)\r\n    }\r\n}", "export * from \"./shapeFlags\"\r\n\r\nexport function isObject(value) {\r\n    return typeof(value) === \"object\" && value !== null;\r\n}\r\nexport function isFunction(value) {\r\n    return typeof(value) === \"function\";\r\n}\r\nexport function isString(value){\r\n    return typeof(value) === \"string\";\r\n}\r\nexport function isVNode(value){\r\n    return value?._v_isVNode;\r\n}\r\nexport function isSameVNode(n1,n2){\r\n    return n1.type === n2.type && n1.key === n2.key;\r\n} \r\n\r\nconst hasOwnProperty = Object.prototype.hasOwnProperty\r\nexport const hasOwn = (value, key) =>hasOwnProperty.call(value,key);//\u53CD\u67EF\u91CC\u5316", "import { isObject, isString, ShapeFlags } from \"@simple-vue/shared\";\r\n\r\nexport const Text = Symbol(\"Text\");\r\nexport const Fragment = Symbol(\"Fragment\"); //\u591A\u6839\u8282\u70B9\u7684\u5B9E\u73B0\r\nexport function createVNode(type, props, children?){\r\n    const shapeFlag = isString(type) ? \r\n                        ShapeFlags.ELEMENT : isObject(type) ? \r\n                        ShapeFlags.STATEFUL_COMPONENT : 0;\r\n    const vnode = {\r\n        _v_isVNode: true,\r\n        type,\r\n        props,\r\n        children,\r\n        key: props?.key, //diff\u7B97\u6CD5\u9700\u8981\u7684key\r\n        el: null, //\u5BF9\u5E94\u7684\u771F\u5B9E\u8282\u70B9\r\n        shapeFlag, \r\n    }\r\n\r\n    if(children){\r\n        if(Array.isArray(children)){\r\n            vnode.shapeFlag = vnode.shapeFlag | ShapeFlags.ARRAY_CHILDREN //\u7EC4\u5408\u6807\u5FD7\uFF0C\u5B58\u5728\u5B50\u865A\u62DF\u8282\u70B9\u7684\u6570\u7EC4\r\n        }else{\r\n            children = String(children);\r\n            vnode.shapeFlag = vnode.shapeFlag | ShapeFlags.TEXT_CHILDREN //\u7EC4\u5408\u6807\u5FD7\uFF0C\u5B58\u5728\u6587\u672C\u5B50\u8282\u70B9\r\n        }\r\n    }\r\n    return vnode;\r\n}", "//\u521B\u5EFA\u865A\u62DFdom\u8282\u70B9\r\n//\u4F20\u53C2\u60C5\u51B5\uFF1A1.\u4E24\u4E2A\u53C2\u6570\uFF0C\u7B2C\u4E8C\u4E2A\u53EF\u80FD\u4E3A\u5C5E\u6027\u6216\u8005\u5B50\u865A\u62DFdom\r\n//2.\u7B2C\u4E8C\u4E2A\u53C2\u6570\u4E3A\u5305\u542B\u5B50\u865A\u62DFdom\u7684\u6570\u7EC4\r\n//3.\u7B2C\u4E8C\u4E2A\u53C2\u6570\u4E3A\u6587\u672C\r\n//4.\u4E09\u4E2A\u53C2\u6570\uFF0C\u7B2C\u4E8C\u4E2A\u53C2\u6570\u5FC5\u987B\u65F6\u5C5E\u6027\r\n//5.\u4E09\u4E2A\u53C2\u6570\u540E\u9762\u7684\u53C2\u6570\u90FD\u662F\u5B50\u865A\u62DFdom\r\n\r\nimport { isObject, isVNode} from \"@simple-vue/shared\";\r\nimport { createVNode } from \"./createVNode\";\r\n\r\nexport function h(type, propsOrChildren?, children?){\r\n    let l = arguments.length;\r\n    if(l === 2){  //\u4E24\u4E2A\u53C2\u6570\r\n        if(isObject(propsOrChildren) && !Array.isArray(propsOrChildren)){ //\u7B2C\u4E8C\u4E2A\u53C2\u6570\u662F\u5BF9\u8C61\uFF0C\u4F46\u4E0D\u662F\u6570\u7EC4\uFF0C\u6240\u4EE5\u53EA\u80FD\u662F\u5C5E\u6027\u6216\u8005\u4E00\u4E2A\u865A\u62DFdom\r\n            if(isVNode(propsOrChildren)){ //\u5982\u679C\u662F\u5B50\u8282\u70B9\uFF0C\u90A3\u4E48\u5C06\u5B83\u5305\u88C5\u6210\u6570\u7EC4\u5904\u7406\r\n                return createVNode(type,null,[propsOrChildren]);\r\n            }else{//\u5426\u5219\u662F\u5C5E\u6027\u5BF9\u8C61\r\n                return createVNode(type,propsOrChildren);\r\n            }\r\n        }\r\n        return createVNode(type,null,propsOrChildren)//\u5269\u4E0B\u7684\u60C5\u51B5\uFF0C\u662F\u4E00\u4E2A\u5B50\u865A\u62DFdom\u6570\u7EC4\r\n    }else{ //\u4E09\u4E2A\u6216\u4EE5\u4E0A\u53C2\u6570\r\n        if(l>3){\r\n            children = Array.from(arguments).slice(2); //3\u4E2A\u4EE5\u4E0A\u76F4\u63A5\u5168\u90E8\u622A\u53D6\u8FD4\u56DE\u4E00\u4E2A\u6570\u7EC4\r\n        }\r\n        if(l === 3 && isVNode(children)){\r\n            children = [children];//\u521A\u597D\u4E09\u4E2A\u4E14\u662F\u5355\u72EC\u7684\u865A\u62DFdom\uFF0C\u5305\u88C5\u6210\u6570\u7EC4\r\n        }\r\n    }\r\n\r\n    return createVNode(type, propsOrChildren, children)//\u6807\u5FD7\u683C\u5F0F\uFF0C\u4E09\u4E2A\u53C2\u6570\uFF0C\u7C7B\u578B\uFF0C\u5C5E\u6027\uFF0C\u865A\u62DFdom\u6570\u7EC4\r\n}", "export function getSequence(arr){\r\n    const result = [0];\r\n    let start,end;\r\n    let middle; //\u4E8C\u5206\u67E5\u627E\u6807\u7B7E\r\n    const p = result.slice(0); //\u6BCF\u4E2A\u8282\u70B9\u5F97\u524D\u9A71\u8282\u70B9\u5217\u8868 \r\n    const len = arr.length;\r\n    for(let i = 0 ; i<len ; i++){\r\n        const arrI = arr[i]; //\u5F53\u524D\u7684\u503C\r\n        if(arrI !== 0){ //\u4E3A0\u5219\u662F\u65B0\u8282\u70B9\uFF0C\u4E0D\u8FDB\u884C\u590D\u7528\r\n            let resultLastIndex = result[result.length-1];//\u7ED3\u679C\u96C6\u6700\u540E\u4E00\u9879\u7D22\u5F15\r\n            if(arr[resultLastIndex] < arrI){ //\u5982\u679C\u524D\u4E00\u4E2A\u503C\u5C0F\u4E8E\u540E\u4E00\u4E2A\u503C\uFF0C\u5219\u6709\u8FDE\u7EED\u6027\u6F5C\u529B\uFF0C\u653E\u5165\u7D22\u5F15\r\n                p[i] = result[result.length-1];\r\n                result.push(i);\r\n                continue;\r\n            }\r\n        }\r\n        start = 0;\r\n        end = result.length-1;\r\n        while(start<end){\r\n            middle = (( start + end ) / 2 ) | 0; //\u5411\u4E0B\u53D6\u6574\u4F4D\u8FD0\u7B97\r\n\r\n            if( arr[result[middle]] < arrI){\r\n                 start = middle + 1;\r\n            }else{\r\n                 end = middle;\r\n            }\r\n        }\r\n\r\n        if(arrI < arr[result[start]]){\r\n            p[i] =  result[start-1];\r\n            result[start] = i;\r\n        }\r\n    }\r\n\r\n    let l = result.length;\r\n    let last = result[l-1];\r\n    while(l-- > 0){\r\n        result[l] = last;\r\n        last = p[last];\r\n    }\r\n    return result;\r\n} \r\n", "//\u8981\u70B9\uFF1A\u4F9D\u8D56\u6536\u96C6\u4E0E\u66F4\u65B0\u8FC7\u7A0B\uFF0C\u4F9D\u8D56\u6536\u96C6\u7684\u5B58\u50A8\u7ED3\u6784weakMap->Map->Map|Set(effect...)\uFF0Ctrack\u4E0Etrigger\uFF0C\r\n//     \u8C03\u5EA6\u6267\u884C\u51FD\u6570\u9009\u9879\uFF0C\u5982\u4F55\u9632\u6B62\u9012\u5F52\u8C03\u7528\uFF0C\u5BF9\u8C61\u7684\u6DF1\u5EA6\u4EE3\u7406\uFF0C\r\n\r\nimport { DirtyLevels } from \"./canstants\";\r\n\r\nexport function effect(fn, options?){\r\n    //\u521B\u5EFA\u4E00\u4E2Aeffct\uFF0C\u4F9D\u8D56\u7684\u6570\u636E\u66F4\u6539\u540E\u6267\u884C\u56DE\u8C03\r\n    const _effect = new ReactiveEffect(fn, ()=>{\r\n        _effect.run();  \r\n    });\r\n    _effect.run();\r\n    if(options){\r\n        Object.assign(_effect, options)\r\n    }\r\n\r\n    const runner = _effect.run.bind(_effect)\r\n    return runner;\r\n}\r\n\r\nexport let activeEffect\r\nfunction preCleanEffect(effect){\r\n    effect._depsLength = 0;\r\n    effect._trackId++; //\u6BCF\u6B21\u6267\u884C+1\uFF0C\u5982\u679C\u4E3A\u540C\u4E00\u4E2Aeffect\uFF0Cid\u5C31\u662F\u76F8\u540C\u7684\r\n}\r\nfunction cleanDepEffect(dep, effect){//\u6E05\u7406\u65E7\u4F9D\u8D56\r\n    dep.delete(effect);\r\n    if(dep.size == 0){\r\n        dep.cleanUp();\r\n    }\r\n}\r\nfunction postCleanEffect(effect){ //\u6E05\u7406\u591A\u4F59\u7684\u4F9D\u8D56\u9879\r\n    if(effect.deps.length > effect._depsLength){\r\n        for(let i = effect._depsLength;i<effect.deps.length;i++){\r\n            cleanDepEffect(effect.deps[i],effect);\r\n        }\r\n    }\r\n    effect.deps.length = effect._depsLength //\u66F4\u65B0\u4F9D\u8D56\u5217\u8868\u7684\u957F\u5EA6\r\n}\r\n\r\nexport class ReactiveEffect{\r\n    _trackId = 0; //\u7528\u4E8E\u8BB0\u5F55\u5F53\u524Deffect\u7684\u6267\u884C\u6B21\u6570,\u5E76\u4E14\u6807\u8BC6\u4E0D\u540C\u7684effect\r\n    _depsLength = 0;//\u6536\u96C6\u7684\u4F9D\u8D56\u6570\r\n    _running = 0;\r\n    _dirtyLevel = DirtyLevels.Dirty;\r\n    deps = [];\r\n    public active = true;\r\n    constructor(public fn, public scheduler){\r\n    }\r\n    run(){\r\n        this._dirtyLevel = DirtyLevels.NoDirty\r\n        if(!this.active){\r\n            return this.fn();\r\n        }\r\n        //\u4F9D\u8D56\u6536\u96C6\r\n        let lastEffect = activeEffect;\r\n        try{\r\n            activeEffect = this;\r\n            //effect\u91CD\u65B0\u6536\u96C6\u524D\uFF0C\u9700\u8981\u5C06\u65E7\u4F9D\u8D56\u6E05\u7A7A\r\n            preCleanEffect(this);\r\n            this._running++;//\u9632\u6B62\u9012\u5F52\u8C03\u7528\uFF0C\u5F53effect\u6B63\u5728\u6267\u884C\u65F6\u4E0D\u89E6\u53D1trigger\r\n            return this.fn();\r\n        }finally{\r\n            this._running--;\r\n            postCleanEffect(this);\r\n            activeEffect = lastEffect;\r\n        }\r\n    }\r\n    stop(){\r\n        if(this.active){\r\n            this.active = false;\r\n            preCleanEffect(this);\r\n            postCleanEffect(this);\r\n        }\r\n    }\r\n    public get dirty(){\r\n        return this._dirtyLevel === DirtyLevels.Dirty\r\n    }\r\n    public set dirty(v){\r\n        this._dirtyLevel = v ? DirtyLevels.Dirty : DirtyLevels.NoDirty;\r\n    }\r\n}\r\n\r\nexport function trackEffect(effect, dep){\r\n    //\u91CD\u65B0\u6536\u96C6\u4F9D\u8D56\uFF0C\u6BD4\u5BF9\u79FB\u9664\u4E0D\u9700\u8981\u7684effect\uFF0C\u7B80\u6613diff\u7B97\u6CD5\r\n    if(dep.get(effect) !== effect._trackId){\r\n        dep.set(effect, effect._trackId);\r\n\r\n        let oldDep = effect.deps[effect._depsLength];//\u65E7\u4F9D\u8D56\r\n        if(oldDep !== dep){\r\n            if(oldDep){\r\n                cleanDepEffect(oldDep,effect);\r\n            }\r\n            effect.deps[effect._depsLength++] = dep;\r\n        }else{\r\n            effect._depsLength++;\r\n        }\r\n    }\r\n}\r\n\r\nexport function triggerEffects(dep){\r\n    for(const effect of dep.keys()){\r\n        if(effect._dirtyLevel < DirtyLevels.Dirty){\r\n            effect._dirtyLevel = DirtyLevels.Dirty;\r\n        }\r\n        if(effect.scheduler){\r\n            if(!effect._running){\r\n                effect.scheduler();\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n", "import { activeEffect, trackEffect, triggerEffects } from \"./effect\";\r\n\r\nconst targetMap = new WeakMap(); //\u5B58\u653E\u4F9D\u8D56\u6536\u96C6\u7684\u5173\u7CFB\r\n\r\nexport const createDep = (cleanUp, key)=>{\r\n    const dep = new Map() as any;\r\n    dep.cleanUp = cleanUp;\r\n    dep.name = key;//\u6807\u8BC6\u6620\u5C04\u8868\u670D\u52A1\u7684\u5C5E\u6027\r\n    return dep;\r\n}\r\n\r\nexport function track(target, key){\r\n    if(activeEffect) {\r\n        let depsMap = targetMap.get(target)\r\n        if(!depsMap){\r\n            targetMap.set(target,(depsMap = new Map()));\r\n        }\r\n\r\n        let dep = depsMap.get(key)\r\n        if(!dep) {\r\n            depsMap.set(\r\n                key, \r\n                dep = createDep(()=>{depsMap.delete(key)}, key)\r\n            )\r\n        }\r\n        trackEffect(activeEffect, dep) //\u5C06\u5F53\u524D\u7684effect\u653E\u5165\u6620\u5C04\u8868\r\n    }\r\n   \r\n}\r\n\r\nexport function trigger(target, key, newValue, oldValue){\r\n    const depsMap = targetMap.get(target)\r\n\r\n    if(!depsMap){\r\n        return\r\n    }\r\n    let dep = depsMap.get(key);\r\n    if(dep){\r\n        triggerEffects(dep);\r\n    }\r\n}   \r\n\r\n", "import { isObject } from \"@simple-vue/shared\";\r\nimport { ReactiveFlags } from \"./canstants\";\r\nimport { reactive } from \"./reactive\";\r\nimport { track, trigger} from \"./reactiveEffect\";\r\n\r\nexport const mutableHandlers: ProxyHandler<any>= {\r\n    get(target, key, recevier){\r\n        if(key === ReactiveFlags.IS_REACTIVE){\r\n            return true;\r\n        }\r\n        //\u5F53\u53D6\u503C\u65F6\uFF0C\u8BA9\u54CD\u5E94\u5F0F\u5C5E\u6027\u4E0Eeffect\u6620\u5C04\r\n        //\u4F9D\u8D56\u6536\u96C6\r\n        track(target, key);//\u6536\u96C6\u5BF9\u8C61\u5C5E\u6027\r\n\r\n        let res = Reflect.get(target, key, recevier);\r\n        if(isObject(res)){\r\n            return reactive(res); //\u53D6\u503C\u4E3A\u5BF9\u8C61\u65F6\uFF0C\u5C06\u5BF9\u8C61\u8BBE\u7F6E\u4E3Areactive\u5B9E\u73B0\u6DF1\u5EA6\u4EE3\u7406\r\n        }\r\n        return res;\r\n    },\r\n    set(target, key, value, recevier){\r\n        //\u4F7F\u7528Reflect\u8C03\u7528\u5BF9\u8C61\u7684\u9ED8\u8BA4\u884C\u4E3A\r\n\r\n        let oldValue = target[key];\r\n        let result = Reflect.set(target, key, value, recevier);\r\n        if(oldValue !== value){\r\n        //\u89E6\u53D1\u66F4\u65B0\r\n            trigger(target, key, value, oldValue);\r\n            return Reflect.set(target, key, value, recevier);\r\n        }\r\n       return result;\r\n    },\r\n};", "import { isObject } from \"@simple-vue/shared\";\r\nimport { mutableHandlers } from \"./baseHandlers\";\r\nimport { ReactiveFlags } from \"./canstants\";\r\n\r\n//\u8BB0\u5F55\u4EE3\u7406\u7684\u54CD\u5E94\u5F0F\u5BF9\u8C61\r\nconst reactiveMap = new WeakMap();\r\n\r\nexport function reactive(target){\r\n    return createReactiveObject(target);\r\n}\r\n\r\nfunction createReactiveObject(target){\r\n    //\u5FC5\u987B\u4F20\u5165\u5BF9\u8C61\r\n    if(!isObject(target)){\r\n        return target;\r\n    }\r\n    \r\n    if(target[ReactiveFlags.IS_REACTIVE]){\r\n        return target;\r\n    }\r\n    //\u7F13\u5B58\u4E2D\u5B58\u5728\u4EE3\u7406\u5BF9\u8C61\uFF0C\u5219\u76F4\u63A5\u8FD4\u56DE\r\n    const existProxy = reactiveMap.get(target);\r\n    if(existProxy){\r\n        return existProxy;\r\n    }\r\n    let proxy = new Proxy(target, mutableHandlers);\r\n    //\u6839\u636E\u5BF9\u8C61\u7F13\u5B58\u4EE3\u7406\u540E\u7684\u7ED3\u679C\r\n    reactiveMap.set(target, proxy);\r\n    return proxy;\r\n}\r\n\r\nexport function toReactive(value){\r\n    return isObject(value) ? reactive(value) : value\r\n}\r\n\r\nexport function isReactive(value){\r\n    return !!(value && value[ReactiveFlags.IS_REACTIVE]);\r\n}", "//\u8981\u70B9\uFF1A api\u7684\u5B9E\u73B0\uFF0C\u4EE3\u7406\u81EA\u52A8\u89E3\u5305\r\n\r\nimport { activeEffect, trackEffect, triggerEffects } from \"./effect\";\r\nimport { toReactive } from \"./reactive\";\r\nimport { createDep } from \"./reactiveEffect\";\r\n\r\nexport function ref(value){\r\n    return creatRef(value);\r\n}\r\n\r\nfunction creatRef(value){\r\n    return new RefImpl(value);\r\n}\r\n\r\nclass RefImpl{ //ref\u5BF9\u8C61\r\n    public __v_isRef = true; //\u589E\u52A0ref\u6807\u8BC6\r\n    public _value; //\u4FDD\u5B58\u5F53\u524Dref\u7684\u503C\r\n    public dep;\r\n    constructor(public rawValue){\r\n        this._value= toReactive(rawValue); \r\n    }\r\n    get value(){\r\n        trackRefValue(this);\r\n        return this._value;\r\n    }\r\n    set value(newValue){\r\n        if(newValue !== this.rawValue){\r\n            this.rawValue = newValue;\r\n            this._value = newValue;\r\n            triggerRefValue(this);\r\n        }\r\n    }\r\n}\r\n\r\n\r\nexport function  trackRefValue(ref){\r\n    if(activeEffect){\r\n        trackEffect(\r\n            activeEffect, \r\n            ref.dep = ref.dep || createDep(()=>(ref.dep = undefined), 'undifined')\r\n        )\r\n    }\r\n}\r\n\r\nexport function  triggerRefValue(ref){\r\n    let dep = ref.dep;\r\n    if(dep){\r\n        triggerEffects(dep);\r\n    }\r\n}\r\n\r\n\r\nclass ObjectRefImpl{\r\n    public __v_isRef = true; //\u589E\u52A0ref\u6807\u8BC6\r\n\r\n    constructor(public _object, public _key){}\r\n\r\n    get value(){\r\n        return this._object[this._key];\r\n    }\r\n\r\n    set value(newValue){\r\n        this._object[this._key] = newValue;\r\n    }\r\n}\r\nexport function toRef(object, key){\r\n    return new ObjectRefImpl(object, key);\r\n}\r\nexport function toRefs(object){\r\n    const res = {};\r\n    for(let key in object){\r\n        res[key] = toRef(object,key);\r\n    }\r\n    return res;\r\n} \r\n\r\nexport function proxyRefs(objectWithRef){\r\n    return new Proxy(objectWithRef,{\r\n        get(target,key,receiver){\r\n            let r = Reflect.get(target,key,receiver);\r\n            return r.__v_isRef ? r.value : r\r\n        },\r\n        set(target,key,value,receiver){\r\n            const oldValue = target.get[key];\r\n                if(oldValue.__v_isRef){\r\n                    oldValue.value = value;\r\n                    return true;\r\n                }\r\n                else{\r\n                    return Reflect.set(target,key,value,receiver);\r\n                }\r\n        } \r\n    })\r\n}\r\n\r\nexport function isRef(value){\r\n    return (value && value.__v_isRef);\r\n}", "//\u5B9E\u73B0\u76EE\u7684\uFF1A\u8BA1\u7B97\u5C5E\u6027\u7684\u4F5C\u7528\u662F\u57FA\u4E8E\u5DF2\u6709\u6570\u636E\u7684\u53D8\u5316\uFF0C\u81EA\u52A8\u8BA1\u7B97\u5E76\u7F13\u5B58\u503C\uFF0C\u800C\u4E0D\u9700\u8981\u5728\u6A21\u677F\u6216\u65B9\u6CD5\u4E2D\u91CD\u590D\u6267\u884C\u903B\u8F91\u3002\u4E0E\u65B9\u6CD5\u4E0D\u540C\u7684\u662F\uFF0C\r\n//\u8BA1\u7B97\u5C5E\u6027\u5177\u6709\u7F13\u5B58\u529F\u80FD\uFF0C\u53EA\u6709\u5728\u5176\u4F9D\u8D56\u7684\u5C5E\u6027\u53D8\u5316\u65F6\u624D\u4F1A\u91CD\u65B0\u8BA1\u7B97\uFF0C\u8FD9\u4F7F\u5F97\u5B83\u66F4\u52A0\u9AD8\u6548\u3002\r\n//\u5B9E\u73B0\u539F\u7406\uFF1A\r\n//1.\u7EF4\u62A4 dirty \u53D8\u91CF\uFF1A\r\n// \u521D\u59CB\u65F6\uFF0Cdirty \u53D8\u91CF\u8BBE\u7F6E\u4E3A true\uFF0C\u8868\u793A\u8BA1\u7B97\u5C5E\u6027\u9700\u8981\u91CD\u65B0\u8BA1\u7B97\u3002\u7B2C\u4E00\u6B21\u8BBF\u95EE\u8BA1\u7B97\u5C5E\u6027\u65F6\uFF0C\u4F1A\u6267\u884C\u76F8\u5173\u7684\u8BA1\u7B97\u903B\u8F91\uFF0C\u7136\u540E\u5C06 dirty \u8BBE\u7F6E\u4E3A false\u3002\r\n// \u5F53\u8BA1\u7B97\u5C5E\u6027\u4F9D\u8D56\u7684\u67D0\u4E2A\u503C\u53D1\u751F\u53D8\u5316\u65F6\uFF0C\u4F1A\u5C06 dirty \u91CD\u65B0\u8D4B\u503C\u4E3A true\uFF0C\u5728\u4E0B\u6B21\u8BBF\u95EE\u65F6\uFF0C\u4F1A\u518D\u6B21\u6267\u884C\u8BA1\u7B97\u903B\u8F91\u3002\r\n//2.\u4F9D\u8D56\u6536\u96C6\uFF1A\r\n// \u8BA1\u7B97\u5C5E\u6027\u5177\u6709\u4F9D\u8D56\u6536\u96C6\u7684\u80FD\u529B\uFF0C\u80FD\u591F\u81EA\u52A8\u6536\u96C6\u4E0E\u5176\u76F8\u5173\u7684\u54CD\u5E94\u5F0F\u6570\u636E\u3002\u8FD9\u901A\u5E38\u662F\u901A\u8FC7\u4F7F\u7528 effect \u6765\u5B9E\u73B0\u7684\u3002\r\n// \u5728\u8BA1\u7B97\u5C5E\u6027\u5185\u90E8\uFF0C\u5F53\u8BBF\u95EE\u4F9D\u8D56\u7684\u54CD\u5E94\u5F0F\u6570\u636E\u65F6\uFF0CVue \u4F1A\u5C06\u8FD9\u4E9B\u4F9D\u8D56\u5173\u7CFB\u8BB0\u5F55\u4E0B\u6765\uFF0C\u4EE5\u4FBF\u5728\u6570\u636E\u53D8\u5316\u65F6\u80FD\u591F\u89E6\u53D1\u91CD\u65B0\u8BA1\u7B97\u3002\r\n//3.\u8BA1\u7B97\u5C5E\u6027\u4F5C\u4E3A effect\uFF1A\r\n// \u8BA1\u7B97\u5C5E\u6027\u672C\u8D28\u4E0A\u662F\u4E00\u4E2A effect\uFF0C\u5373\u5B83\u662F\u4E00\u4E2A\u51FD\u6570\uFF0C\u8FD4\u56DE\u4E0D\u53EF\u53D8\u7684ref\uFF0C\u5E76\u4E14\u5728\u8FD9\u4E2A\u51FD\u6570\u5185\u90E8\u4F1A\u8BBF\u95EE\u4E00\u4E9B\u54CD\u5E94\u5F0F\u6570\u636E\u3002Vue \u5728\u7B2C\u4E00\u6B21\u6267\u884C\u8FD9\u4E2A\u51FD\u6570\u65F6\u4F1A\u8FDB\u884C\u4F9D\u8D56\u6536\u96C6\uFF0C\u5E76\u5728\u540E\u7EED\u6570\u636E\u53D8\u5316\u65F6\u81EA\u52A8\u89E6\u53D1\u8FD9\u4E2A\u51FD\u6570\u3002\r\n\r\nimport { isFunction } from \"@simple-vue/shared\";\r\nimport { ReactiveEffect, triggerEffects } from \"./effect\";\r\nimport { trackRefValue } from \"./ref\";\r\nimport { triggerRefValue } from \"./ref\";\r\n\r\nclass ComputedRefImpl{\r\n    public _value; //\u7F13\u5B58\u8BA1\u7B97\u503C\r\n    public effect;\r\n    public dep;\r\n    constructor(getter,public setter){\r\n       this.effect = new ReactiveEffect(\r\n            ()=>getter(this._value),\r\n            ()=>{\r\n                triggerRefValue(this)//\u8BA1\u7B97\u5C5E\u6027\u53D8\u5316\u91CD\u65B0\u89E6\u53D1\r\n        })\r\n    }\r\n    get value(){\r\n        if(this.effect.dirty){\r\n        //\u9ED8\u8BA4\u4E3A\u810F\uFF0C\u6267\u884C\u4E00\u6B21\r\n            this._value = this.effect.run();\r\n            //\u5F53\u524D\u5728effect\u4E2D\u8BBF\u95EE\u4E86\u8BA1\u7B97\u5C5E\u6027\uFF0C\u8BA1\u7B97\u5C5E\u6027\u53EF\u4EE5\u6536\u96C6effect\r\n            trackRefValue(this)\r\n        }\r\n        return this._value\r\n        \r\n    }\r\n    set value(v){\r\n        this.setter(v);\r\n    }\r\n}\r\n\r\n\r\nexport function computed(getterOrOptions){\r\n    let onlyGetter = isFunction(getterOrOptions);\r\n    let getter,setter;\r\n    if(onlyGetter){\r\n        getter = getterOrOptions;\r\n        setter = function(){};\r\n    }else{\r\n        getter = getterOrOptions.get;\r\n        setter = getterOrOptions.set;\r\n    }\r\n\r\n    return new ComputedRefImpl(getter,setter);\r\n}", "import { isFunction, isObject } from \"@simple-vue/shared\";\r\nimport { ReactiveEffect } from \"./effect\";\r\nimport { isReactive } from \"./reactive\";\r\nimport { isRef } from \"./ref\";\r\n\r\n//\u76D1\u63A7\u54CD\u5E94\u5F0F\u6570\u636E\r\nexport function watch(source,cb,options={} as any){\r\n    if(!isFunction(cb)){\r\n        return;\r\n    }\r\n    return doWatch(source,cb,options);\r\n}\r\n\r\nexport function watchEffect(source,options = {}){\r\n    return doWatch(source, null, options as any)\r\n}\r\n\r\n//\u904D\u5386\u51FD\u6570,\u63A7\u5236\u76D1\u63A7\u7684\u5C42\u7EA7\r\nfunction traverse(source,depth,currentDepth = 0,seen = new WeakMap()){\r\n    if(!isObject(source)){\r\n        return source;\r\n    }\r\n    if(depth){\r\n        if(depth <= currentDepth){\r\n            return source;\r\n        }\r\n        currentDepth++;\r\n    }\r\n    if(seen.has(source)){\r\n        return source;\r\n    }\r\n    seen.set(source,true);\r\n    for(let key in source){\r\n        traverse(source[key],depth,currentDepth,seen)\r\n    }\r\n    return source;\r\n}\r\n\r\nfunction doWatch(source,cb,{deep,immediate}){\r\n\r\n    //\u4EA7\u751F\u4E00\u4E2Agetter,\u5173\u8054\u5230reactiveEffect\r\n    const reactiveGetter = (source) => traverse(source,deep === false ? 1 :undefined);\r\n    \r\n    let getter\r\n     if(isReactive(source)){\r\n        getter = () => reactiveGetter(source);\r\n    } else if(isRef(source)){\r\n        if(isReactive(source.value)){\r\n            //\u5982\u679C\u5F53\u524D\u4E3Aref\u5BF9\u8C61\r\n            getter = () => reactiveGetter(source.value)\r\n        }else{\r\n            getter = () => source.value;\r\n        }\r\n    }else if(isFunction(source)){\r\n        getter = source;\r\n    }\r\n\r\n    let oldValue;\r\n    let clean\r\n    const onCleanup = (fn) =>{\r\n        clean = ()=>{\r\n            fn();\r\n            clean = undefined; //\u6267\u884C\u6E05\u7406\r\n        }\r\n    }\r\n\r\n    const job = () => {\r\n        if(cb){\r\n            const newValue = effect.run();\r\n            if(clean){\r\n                clean()\r\n            }\r\n            cb(newValue,oldValue,onCleanup);\r\n            oldValue = newValue;\r\n        }else{\r\n            effect.run()\r\n        }\r\n    }\r\n\r\n    const effect = new ReactiveEffect(getter,job)\r\n\r\n    if(cb){\r\n        if(immediate){\r\n            job();\r\n        }else{\r\n            oldValue = effect.run();\r\n        }\r\n    }else{\r\n        effect.run();\r\n    }\r\n\r\n    const unWatch = () =>{\r\n        effect.stop();\r\n    };\r\n\r\n    return unWatch;\r\n} ", "const queue = [] //\u7F13\u5B58\u5F53\u524D\u7684\u6267\u884C\u51FD\u6570\u961F\u5217\r\nlet isFlushing = false;\r\nconst resolvePromise = Promise.resolve();\r\n\r\n//\u5982\u679C\u540C\u65F6\u5728\u7EC4\u4EF6\u4E2D\u66F4\u65B0\u591A\u4E2A\u72B6\u6001\uFF0Cjob\u53EA\u8BB0\u5F55\u4E00\u4E2A\r\nexport function queueJob(job){\r\n    if(!queue.includes(job)){\r\n        queue.push(job);\r\n    }\r\n    if(!isFlushing){\r\n        isFlushing = true;\r\n\r\n        resolvePromise.then(()=>{\r\n            isFlushing = false;\r\n            const copy = queue.slice(0);\r\n            queue.length = 0;\r\n            copy.forEach((job)=>job());\r\n            copy.length = 0;\r\n        })\r\n    }\r\n}", "import { proxyRefs, reactive } from \"@simple-vue/reactivity\";\r\nimport { hasOwn, isFunction } from \"@simple-vue/shared\";\r\n\r\n//\u7EC4\u4EF6\u66F4\u65B0\uFF0C\u57FA\u4E8E\u72B6\u6001data\uFF0C\u5C5E\u6027props\uFF0C\u63D2\u69FDslots\r\n\r\nexport function createComponentInstance(vnode){\r\n    //\u521B\u5EFA\u7EC4\u4EF6\u5B9E\u4F8B\r\n    const instance = { \r\n        data: null,  \r\n        vnode,//\u7EC4\u4EF6\u7684\u865A\u62DF\u8282\u70B9\r\n        subTree: null,\r\n        isMounted: false,\r\n        update: null, //\u7EC4\u4EF6\u7684\u66F4\u65B0\u51FD\u6570\r\n        props:{}, //\u7528\u6237\u81EA\u5B9A\u4E49\u7EC4\u4EF6\u5C5E\u6027\uFF0C\u54CD\u5E94\u5F0F \r\n        attrs:{}, //dom\u8282\u70B9\u5C5E\u6027\uFF0C\u975E\u54CD\u5E94\u5F0F\r\n        propsOptions: vnode.type.props,\r\n        component: null,\r\n        proxy: null,  //\u4EE3\u7406\u5BF9\u8C61\uFF0C\u4EE3\u7406props\uFF0Cattrs\uFF0Cdata,\u65B9\u4FBF\u7528\u6237\u8BBF\u95EE \r\n        setupState: {}\r\n    };\r\n    return instance;\r\n}\r\n\r\n//\u521D\u59CB\u5316\u5B9E\u4F8B\u5C5E\u6027\r\n//\u6839\u636EpropsOptions\u533A\u5206attrs\u548Cprops\r\nconst initProps = (instance, rawProps)=>{ //raw\u4E3A\u7EC4\u4EF6\u7684\u6240\u6709\u5C5E\u6027\r\n    const props = {};\r\n    const attrs = {};\r\n    const propsOptions = instance.propsOptions || {};\r\n    if(rawProps){ //\u4ECE\u6240\u6709\u7684\u5C5E\u6027\u4E2D\u5206\u79BB\u51FAprops\u548Cattr\r\n        for(let key in rawProps){\r\n            const value = rawProps[key];\r\n\r\n            if(key in propsOptions){\r\n                props[key] = value;//\u4E0D\u9700\u8981\u6DF1\u5EA6\u4EE3\u7406\uFF0C\u7EC4\u4EF6\u4E0D\u9700\u8981\u66F4\u6539\u5C5E\u6027 \r\n            }else{\r\n                attrs[key] = value;\r\n            }\r\n        }\r\n    }\r\n    instance.props = reactive(props);\r\n    instance.attrs = attrs;\r\n}\r\n\r\n//\u7EC4\u4EF6\u5B9E\u4F8B\u4EE3\u7406\u5BF9\u8C61\uFF0C\u4EE3\u7406props\uFF0Cattrs\uFF0Cdata,\u65B9\u4FBF\u7528\u6237\u8BBF\u95EE\r\nconst publicProperty = {\r\n    $attrs: (instance)=>instance.attrs,\r\n}\r\nconst handlerProxy = (instance)=>{\r\n        instance.proxy = new Proxy(instance, {\r\n        get(target,key){\r\n            const {data, props, setupState} = target;\r\n            if(data && hasOwn(data,key)){ //y\u7528\u6237\r\n                return data[key];  \r\n            }else if(props&&hasOwn(props,key)){\r\n                return props[key];\r\n            }else if(setupState && hasOwn(setupState,key)){\r\n                return setupState[key];\r\n            }  \r\n            const getter = publicProperty[key];\r\n            if(getter){\r\n                return getter(target);\r\n            }\r\n        },\r\n        set(target,key,value){\r\n            const {data, props, setupState} = target;\r\n            if(data && hasOwn(data,key)){\r\n                data[key] = value;\r\n            }else if(hasOwn(props,key)){\r\n                console.log(\"props are only readonly\");\r\n            }else if(setupState && hasOwn(setupState,key)){\r\n                setupState[key] = value;\r\n            }   \r\n            return true;\r\n        }\r\n    })\r\n}\r\n \r\n//\u521D\u59CB\u5316\u7EC4\u4EF6\u5B9E\u4F8B\r\nexport function setupComponent(instance){\r\n    const {vnode} = instance;\r\n    initProps(instance,vnode.props);\r\n    handlerProxy(instance);\r\n    const {data = ()=>{}, render, setup} = vnode.type ;\r\n\r\n    if(setup){\r\n        const setupContext = {\r\n\r\n        }\r\n        const setupResult =  setup(instance.props,setupContext);\r\n        console.log(setupResult)\r\n        if(isFunction(setupResult)){\r\n            instance.render = setupResult;\r\n        }else{\r\n            instance.setupState = proxyRefs(setupResult); //\u5C06\u8FD4\u56DE\u503C\u81EA\u52A8.value\r\n        }\r\n    }\r\n\r\n    if(!isFunction(data)){\r\n        console.warn(\"data must be a function\");\r\n    }else{\r\n        instance.data = reactive(data.call(instance.proxy));\r\n    }\r\n    //this\u6307\u5411proxy\uFF0Cdata\u4E2D\u53EF\u4EE5\u53D6\u503Cproxy\r\n    if(!instance.render){\r\n        instance.render = render; //setup\u4E2D\u6CA1\u6709render\u7528\u81EA\u5B9A\u4E49\u7684render\r\n    }\r\n      \r\n}  ", "import { hasOwn, isSameVNode, ShapeFlags } from \"@simple-vue/shared\";\r\nimport { getSequence } from \"./seq\"\r\nimport { Fragment, Text } from \"./createVNode\";\r\nimport { reactive, ReactiveEffect } from \"@simple-vue/reactivity\";\r\nimport { queueJob } from \"./scheduler\";\r\nimport { createComponentInstance, setupComponent } from \"./component\";\r\n\r\n\r\nexport function createRenderer(renderOptions){\r\n    //\u521B\u5EFA\u6E32\u67D3\u5668\uFF0C\r\n    //\u8FD0\u884C\u65F6\u6838\u5FC3\u6A21\u5757\uFF0C\u4E0D\u5173\u5FC3\u5982\u4F55\u6E32\u67D3\uFF0C\u53EA\u5B9A\u4E49\u6E32\u67D3\u884C\u4E3A\r\n    //\u53EF\u4EE5\u8DE8\u5E73\u53F0\u5B9A\u4E49\u6E32\u67D3api\r\n    const{\r\n        insert: hostInsert,\r\n        remove: hostRemove,\r\n        createElement: hostCreateElement,\r\n        createText: hostCreateText,\r\n        setText: hostSetText,\r\n        setElementText: hostsetElementText,\r\n        parentNode: hostparentNode,\r\n        nextSibling: hostnextSibling,\r\n        patchProp: hostpatchProp\r\n    } = renderOptions;\r\n\r\n    //\u6302\u8F7D\u5B50\u5143\u7D20\r\n    const mountChildren = (children, container)=>{\r\n        for(let child=0;child<children.length;child++){\r\n            patch(null,children[child],container);\r\n        }\r\n    }\r\n    //\u6302\u8F7D\u5143\u7D20\r\n    const  mountElement = (vnode, container,anchor)=>{\r\n        const {type, children, props,shapeFlag} = vnode;\r\n\r\n        //\u7B2C\u4E00\u6B21\u6E32\u67D3\u7684\u65F6\u5019\uFF0C\u5C06\u865A\u62DFdom\u4E0E\u5176\u6302\u8F7D\u7684\u771F\u5B9Edom\u5173\u8054\uFF0C\u6DFB\u52A0\u4E00\u4E2A\u5C5E\u6027\u8BB0\u5F55\uFF0C\u540C\u65F6\u53EF\u4EE5\u505A\u6BD4\u5BF9\u66F4\u65B0\r\n        let el = (vnode.el =  hostCreateElement(type));\r\n\r\n        if(props) {\r\n            for(let prop in props){\r\n                hostpatchProp(el, prop, null, props[prop]);\r\n            }\r\n        }\r\n\r\n        if(shapeFlag & ShapeFlags.TEXT_CHILDREN){\r\n            hostsetElementText(el,children)\r\n        }else if(shapeFlag & ShapeFlags.ARRAY_CHILDREN){\r\n            mountChildren(children, el);\r\n        }\r\n        \r\n        hostInsert(el,container,anchor);\r\n    }\r\n\r\n    function processElement(oldVN, newVN, container,anchor){        \r\n        if(oldVN == null){\r\n            //\u5143\u7D20\u521D\u59CB\u5316\r\n            mountElement(newVN, container,anchor);\r\n        }else{\r\n            patchElement(oldVN, newVN, container)\r\n        }\r\n    }\r\n\r\n    function patchProps(oldProps,newProps,el){\r\n        for(let key in newProps){\r\n            hostpatchProp(el,key,oldProps[key],newProps[key]);\r\n        }\r\n        for(let key in oldProps){\r\n            if(!(key in newProps)){\r\n                hostpatchProp(el,key,oldProps[key],null);\r\n            }\r\n        }\r\n    }\r\n    const unmount = (vnode)=> {\r\n        if(vnode.type === Fragment){\r\n            unmountChildren(vnode.children)\r\n        }else{\r\n            hostRemove(vnode.el);\r\n        }\r\n    }; //\u5378\u8F7D\u5143\u7D20\r\n\r\n    const unmountChildren = (children)=>{ //\u5378\u8F7D\u5B50\u5143\u7D20\r\n        for(let i = 0;i<children.length;i++){\r\n            let child = children[i];\r\n            unmount(child);\r\n        }\r\n    }\r\n    const patchKeyedChildren = (oldC,newC,container)=>{\r\n        //key\u503C\u5B58\u5728\u7684\u60C5\u51B5\r\n        //\u6BD4\u8F83\u5E26key\u5B50\u8282\u70B9\u5DEE\u5F02\uFF0C\u540C\u5C42\u6BD4\u8F83\uFF0C\u53CC\u7AEF\u6BD4\u8F83\r\n        //1.\u51CF\u5C11\u6BD4\u8F83\u8303\u56F4\uFF0C\u5148\u4ECE\u5934\u90E8\u6BD4\u8F83\uFF0C\u518D\u4ECE\u5C3E\u90E8\u6BD4\u8F83\uFF0C\u786E\u5B9A\u9700\u8981\u6BD4\u8F83\u7684\u8303\u56F4\r\n        //2.\u518D\u4ECE\u5934\u6BD4\u5BF9\uFF0C\u5C3E\u90E8\u6BD4\u5BF9\uFF0C\u5982\u679C\u6709\u4E0D\u540C\u7684\u76F4\u63A5\u64CD\u4F5C\r\n\r\n        let i = 0;//\u5F00\u59CB\u6BD4\u5BF9\u7684\u7D22\u5F15,\u5934\u90E8\u6307\u9488\r\n        let e1 = oldC.length - 1;//\u7B2C\u4E00\u4E2A\u6570\u7EC4\u7684\u5C3E\u90E8\u7D22\u5F15\uFF0C\u5C3E\u90E8\u6307\u9488\r\n        let e2 = newC.length - 1;//\u7B2C\u4E8C\u4E2A\u6570\u7EC4\u7684\u5C3E\u90E8\u7D22\u5F15\r\n\r\n        //\u53CC\u7AEF\u6BD4\u8F83\r\n        while(i<=e1 && i<=e2){ // 1.\u4ECE\u524D\u5F80\u540E\uFF0C\u4EFB\u4F55\u4E00\u4E2A\u5B50\u8282\u70B9\u6570\u7EC4\u5FAA\u73AF\u7ED3\u675F\uFF0C\u4E2D\u6B62\u6BD4\u8F83\r\n            const n1 = oldC[i];\r\n            const n2 = newC[i];\r\n            if(isSameVNode(n1,n2)){\r\n                patch(n1,n2,container); //\u66F4\u65B0\u5F53\u524D\u8282\u70B9\u7684\u5C5E\u6027\u548C\u5B50\u8282\u70B9\r\n            }else{\r\n                break;\r\n            }\r\n            i++;\r\n        }\r\n        while(i<=e1 && i<=e2){ 2.//\u4ECE\u540E\u5F80\u524D\u6BD4\u5BF9\r\n            const n1 = oldC[e1]; \r\n            const n2 = newC[e2];\r\n\r\n            if(isSameVNode(n1,n2)){\r\n                patch(n1,n2,container);\r\n            }else{\r\n                break;\r\n            }\r\n            e1--;\r\n            e2--;\r\n        }   \r\n        //\u53CC\u7AEF\u6BD4\u5BF9\u5B8C\u6210\uFF0C\u6BD4\u8F83\u6307\u9488\u4F4D\u7F6E\r\n        //3.i>e1\u65F6\uFF0C\u6709\u65B0\u589E\u5143\u7D20\uFF0Ci\u5230e2\u7684\u5185\u5BB9\r\n        if(i>e1){\r\n            if(i<=e2){\r\n               while(i<=e2) { \r\n                    const nextPos = e2+1;\r\n                    //\u8FFD\u52A0\uFF0C\u5982\u679Ce2\u540E\u5B58\u5728\u4E0B\u4E00\u4E2A\u5143\u7D20\uFF0C\u8BF4\u660E\u5728\u5934\u90E8\u8FFD\u52A0\uFF0C\u62FF\u5230\u4E0B\u4E00\u4E2A\u5143\u7D20\u5BF9\u5E94\u7684\u771F\u5B9Edom\r\n                    //\u6CA1\u6709\u4E0B\u4E00\u4E2A\u5143\u7D20\uFF0C\u8BF4\u660E\u5C3E\u90E8\u8FFD\u52A0\r\n                    const anchor = nextPos < newC.length ? newC[nextPos].el :null\r\n                    patch(null,newC[i],container,anchor);\r\n                    i++;\r\n               }   \r\n            }\r\n        }else if(i>e2){ //4.i>e2\u65F6,\u9700\u8981\u5220\u9664\u5143\u7D20\r\n            while(i<=e1){\r\n                unmount(oldC[i]);\r\n                i++;\r\n            }\r\n        }\r\n        //\u4EE5\u4E0A\u786E\u5B9A\u4E0D\u53D8\u5316\u7684\u8282\u70B9\uFF0C\u590D\u7528\r\n        //5. \u6700\u540E\u7279\u6B8A\u60C5\u51B5\uFF0C\u65E2\u65E0\u6CD5\u524D\u540E\u5339\u914D\u7684\u4E71\u5E8F\uFF0Cunknown sequence\r\n\r\n        let s1 = i;\r\n        let s2 = i; \r\n        //build key:index map for newChildren\r\n        const keyToNewIndexMap = new Map();\r\n        let toBePatched = e2 -s2 + 1 //\u9700\u8981\u63D2\u5165\u7684\u4E2A\u6570\r\n\r\n        let newIndexToOldMapIndex = new Array(toBePatched).fill(0); \r\n        //\u8BB0\u5F55\u4E71\u5E8F \u8282\u70B9\u7684\u5BF9\u5E94\u539F\u59CB\u4F4D\u7F6E\uFF0C0\u4E3A\u672A\u521B\u5EFA\u7684\u8282\u70B9\uFF0C\u5BF9\u8BE5\u6570\u7EC4\u6C42\u8FDE\u7EED\u6027\u6700\u5F3A\u7684\u5B50\u5E8F\u5217\u7D22\u5F15\r\n\r\n        for(let i =s2;i<=e2;i++){\r\n            const vnode = newC[i];\r\n            keyToNewIndexMap.set(vnode.key, i); \r\n        }\r\n        for(let i =s1;i<=e1;i++){\r\n            const vnode =oldC[i];\r\n            const newIndex = keyToNewIndexMap.get(vnode.key);//\u5728\u65B0\u7684\u5B50\u8282\u70B9map\u4E2D\u5339\u914D\u5B58\u5728\u7684\u65E7\u8282\u70B9 \r\n            if(newIndex == undefined){ \r\n                unmount(vnode);//\u5220\u9664\u4E0D\u9700\u8981\u7684\u65E7\u8282\u70B9\r\n            }else{\r\n                newIndexToOldMapIndex[newIndex-s2] = i+1;\r\n                patch(vnode,newC[newIndex],container);//\u590D\u7528\u5B58\u5728\u7684\u65E7\u8282\u70B9 \r\n            }\r\n        }\r\n        //\u8C03\u6574\u987A\u5E8F   \r\n        //\u6839\u636E\u65B0\u961F\u5217\u8C03\u6574\u63D2\u5165\u987A\u5E8F,\u901A\u8FC7\u53C2\u7167\u7269\u5012\u5E8F\u63D2\u5165\r\n\r\n        //vue3 \u5168\u91CFdiff\uFF0C\u5FEB\u901Fdiff(\u9776\u5411\u66F4\u65B0\uFF0C\u57FA\u4E8E\u7F16\u8BD1\u6A21\u5757)\r\n        let increasingSeq = getSequence(newIndexToOldMapIndex);\r\n        //diff\u7B97\u6CD5\u4F18\u5316\uFF0C\u9488\u5BF9\u91CD\u590D\u51FA\u73B0\u7684\u6700\u957F\u5B50\u5E8F\u5217\u4E0D\u8FDB\u884C\u79FB\u9664\u63D2\u5165\u64CD\u4F5C\r\n        let seqLast = increasingSeq.length-1;\r\n        \r\n        for(let i = toBePatched - 1;i>=0;i--){\r\n            let newIndex =  s2 + i //\u9700\u8981\u66F4\u65B0\u4E71\u5E8F\u8282\u70B9\u7684\u672B\u5C3E\u5BF9\u5E94\u7684\u7D22\u5F15 \r\n            let anchor = newC[newIndex+1]?.el;  // \u5F53\u524D\u53C2\u7167\u7269\r\n            let vnode = newC[newIndex];\r\n            if (!vnode.el) {  // \u6CA1\u6709\u5BF9\u5E94\u7684\u771F\u5B9E\u8282\u70B9\uFF0C\u5219\u662F\u65B0\u589E\u5143\u7D20\r\n                patch(null, vnode, container, anchor);\r\n            } else {\r\n                if(i === increasingSeq[seqLast]){\r\n                    seqLast--;\r\n                }else{\r\n                    hostInsert(vnode.el, container, anchor);\r\n                }\r\n            }\r\n        }\r\n    } \r\n\r\n    function patchChildren(oldVN,newVN,container){\r\n        const oldC = oldVN.children;\r\n        const newC = newVN.children;\r\n        //\u5B50\u8282\u70B9\u7684\u7EC4\u5408\u60C5\u51B5\r\n        //1.\u65B0\u6587\u672C\uFF0C\u65E7\u6570\u7EC4\uFF0C\u79FB\u9664\u6570\u7EC4,\u52A0\u5165\u65B0\u6587\u672C\r\n        //2.\u65B0\u6587\u672C\uFF0C\u65E7\u6587\u672C\uFF0C\u76F4\u63A5\u66FF\u6362\r\n        //3.\u65B0\u6570\u7EC4, \u65E7\u6570\u7EC4,\u5168\u91CFdiffn\r\n        //4.\u65B0\u4E0D\u662F\u6570\u7EC4\uFF0C\u65E7\u6570\u7EC4\r\n        //5.\u65B0\u7A7A\uFF0C\u65E7\u6570\u7EC4\r\n        //6.\u65B0\u6570\u7EC4\uFF0C\u65E7\u6587\u672C\r\n        const preShapeFlag = oldVN.shapeFlag;\r\n        const shapeFlag = newVN.shapeFlag; \r\n        if(shapeFlag & ShapeFlags.TEXT_CHILDREN){ \r\n            if(preShapeFlag & ShapeFlags.ARRAY_CHILDREN){   \r\n                unmountChildren(oldC);//\u60C5\u51B51\uFF0C\u79FB\u9664\u65E7\u6570\u7EC4\r\n            }\r\n            if(oldC !==  newC){ //\u4E24\u4E2A\u5B50\u8282\u70B9\u4E0D\u540C\uFF0C\u8BBE\u7F6E\u65B0\u7684\u6587\u672C\uFF0C\u5305\u542B\u60C5\u51B51\uFF0C2\r\n                hostsetElementText(container,newC);\r\n            }\r\n        }else{\r\n            if(preShapeFlag & ShapeFlags.ARRAY_CHILDREN){\r\n                if(shapeFlag & ShapeFlags.ARRAY_CHILDREN){//\u60C5\u51B53\uFF0C\u65B0\u65E7\u90FD\u662F\u6570\u7EC4\uFF0C\u5168\u91CFdiff\r\n                    patchKeyedChildren(oldC,newC,container);\r\n                }else{\r\n                    unmountChildren(oldC)//\u60C5\u51B54\u548C5\uFF0C\u65B0\u4E0D\u662F\u6570\u7EC4\uFF0C\u79FB\u9664\u65E7\u6570\u7EC4\r\n                }\r\n            }else{\r\n                if(preShapeFlag & ShapeFlags.TEXT_CHILDREN){\r\n                    hostsetElementText(container,\"\")\r\n                }\r\n                if(shapeFlag & ShapeFlags.ARRAY_CHILDREN){//\u60C5\u51B56\uFF0C\u65B0\u7684\u662F\u6587\u672C\uFF0C\u6302\u8F7D\u65B0\u6570\u7EC4\r\n                    mountChildren(container,newC);\r\n                }\r\n            }\r\n        }\r\n \r\n    }\r\n    function patchElement(oldVN, newVN, container){\r\n        //1.\u6BD4\u8F83\u5143\u7D20\u5DEE\u5F02\r\n        //2.\u6BD4\u8F83\u5C5E\u6027\u548C\u5B50\u8282\u70B9\r\n        let el = (newVN.el = oldVN.el); //\u5BF9\u771F\u5B9Edom\u5143\u7D20\u7684\u590D\u7528\uFF0C\u53EA\u66F4\u65B0\u4E00\u4E9B\u5C5E\u6027\u7B49\uFF0C\u4E0D\u9500\u6BC1\r\n        let oldProps = oldVN.props || {};\r\n        let newProps = newVN.props || {};\r\n        patchProps(oldProps,newProps,el); \r\n        patchChildren(oldVN,newVN,el);\r\n    }\r\n\r\n    const processText = (oldVN,newVN,container)=>{\r\n        if(oldVN === null){\r\n           //\u7BA1\u7406\u771F\u5B9E\u8282\u70B9\uFF0C\u5C06\u8282\u70B9\u63D2\u5165\u9875\u9762\u4E2D\r\n           hostInsert(newVN.el = hostCreateText(newVN.children),container);\r\n        }else{\r\n            let el = (newVN.el = oldVN.el);\r\n            if(oldVN.children !== newVN.children){\r\n                hostSetText(el,newVN.children); \r\n           }  \r\n        }\r\n    }       \r\n\r\n    const processFragment = (oldVN,newVN,container)=>{\r\n        if(oldVN == null){\r\n            mountChildren(newVN.children, container);\r\n        }else{\r\n            patchChildren(oldVN,newVN,container);\r\n        }\r\n    }\r\n\r\n    const updataComponentPreRender = (instance,next)=>{\r\n        instance.next = null;\r\n        instance.vnode =next;\r\n        updataProps(instance,instance.props,next.props);\r\n    }\r\n\r\n    //3.\u521B\u5EFAeffect\uFF0C\u4F9D\u8D56\u6536\u96C6\r\n    function setupRenderEffect(instance, container, anchor) {\r\n        const {render} = instance; //\u7EC4\u4EF6\u4E2D\u7684render\r\n        const componentUpdateFn = ()=>{\r\n            if(!instance.isMounted){//\u7EC4\u4EF6\u9996\u6B21\u6E32\u67D3  \r\n                const subTree = render.call(instance.proxy, instance.proxy );\r\n                instance.subTree = subTree;\r\n                patch(null,subTree,container,anchor);\r\n                instance.isMounted = true;\r\n            }else{ \r\n                //\u57FA\u4E8E\u72B6\u6001\u7684\u66F4\u65B0\r\n                const {next} = instance;\r\n                if(next){\r\n                    //\u66F4\u65B0\u5C5E\u6027\u548C\u63D2\u69FD\r\n                    updataComponentPreRender(instance,next);\r\n                }\r\n                const subTree = render.call(instance.proxy, instance.proxy);\r\n                patch(instance.subTree,subTree,container,anchor);\r\n                instance.subTree = subTree;\r\n            }   \r\n        }\r\n\r\n        const update = (instance.update = ()=>{\r\n            effect.run();\r\n        });\r\n        const effect = new ReactiveEffect(componentUpdateFn, ()=>queueJob(update )); \r\n        update(); \r\n    }\r\n\r\n    const mountComponent = (newVN, container, anchor)=>{\r\n        //1.\u521B\u5EFA\u7EC4\u4EF6\u5B9E\u4F8B\r\n        const instance = newVN.component = createComponentInstance(newVN);\r\n        //2.\u5B9E\u4F8B\u521D\u59CB\u5316\r\n        setupComponent(instance); \r\n        //3.\u521B\u5EFAeffect\uFF0C\u4F9D\u8D56\u6536\u96C6\r\n        setupRenderEffect(instance, container, anchor)\r\n      \r\n    }\r\n\r\n    const hasPropsChange = (prevProps,nextProps)=>{\r\n        let nkeys = Object.keys(nextProps)\r\n        if(nkeys.length !== Object.keys(prevProps).length){\r\n            return true;\r\n        } \r\n        for(let i = 0 ; i < nkeys.length ; i++){\r\n            const key = nkeys[i];\r\n            if(nextProps[key] !== prevProps[key]){\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n\r\n    const updataProps = (instance,prevProps,nextProps)=>{\r\n        if(hasPropsChange(prevProps,nextProps)){\r\n            for(let key in nextProps){\r\n                instance.props[key] = nextProps[key];\r\n            }\r\n            for(let key in instance.props){\r\n                if(!(key in nextProps)){\r\n                    delete instance.props[key];\r\n                }\r\n            }\r\n        }\r\n        \r\n    }\r\n\r\n    const shouldComponentUpdate = (oldVN,newVN)=>{\r\n        const {props: prevProps, children: preChildren} = oldVN;\r\n        const {props: nextProps, children: nextChildren} = newVN;\r\n\r\n        if(preChildren || nextChildren) return true; //\u6709\u63D2\u69FD\u76F4\u63A5\u91CD\u65B0\u6E32\u67D3\r\n        if(prevProps === nextProps) return false;\r\n    \r\n        // \u5982\u679C\u5C5E\u6027\u4E0D\u4E00\u81F4\uFF0C\u66F4\u65B0\r\n        return hasPropsChange(prevProps,nextProps);\r\n    }\r\n\r\n    const updateComponent = (oldVN,newVN)=>{\r\n        //\u5143\u7D20\u66F4\u65B0\uFF0C\u590D\u7528dom n2.el = n1.el\r\n        //\u7EC4\u4EF6\u66F4\u65B0\uFF0C\u590D\u7528\u7EC4\u4EF6\u5B9E\u4F8B n2.component= n1.component\r\n        const instance = (newVN.component = oldVN.component)\r\n\r\n        if(shouldComponentUpdate(oldVN,newVN)){\r\n            instance.next = newVN; //\u6709next\u5C5E\u6027\uFF0C\u8BF4\u660E\u662F\u5C5E\u6027\u66F4\u65B0\u6216\u8005\u63D2\u69FD\u66F4\u65B0\r\n            instance.update();\r\n        }\r\n    }\r\n\r\n    const processComponent = (oldVN, newVN, container, anchor)=>{\r\n        if(oldVN === null){\r\n            mountComponent(newVN, container, anchor);\r\n        }else{\r\n            updateComponent(oldVN,newVN);\r\n        }\r\n    }\r\n\r\n    //\u9996\u6B21\u6E32\u67D3\u4E0E\u66F4\u65B0\uFF0ColdVN\u4E3Anull\u5219\u662F\u9996\u6B21\u6E32\u67D3\r\n    const patch = (oldVN, newVN, container,anchor = null)=>{\r\n        if(oldVN === newVN){\r\n            return;\r\n        }\r\n        if(oldVN && !isSameVNode(oldVN,newVN)){\r\n            unmount(oldVN);\r\n            oldVN=null;\r\n        }\r\n        const {type,shapeFlag} = newVN;\r\n        switch(type){\r\n            case Text:\r\n                processText(oldVN,newVN,container);\r\n                break;\r\n            case Fragment:\r\n                processFragment(oldVN,newVN,container);\r\n                break;\r\n            default:\r\n                if(shapeFlag & ShapeFlags.ELEMENT){\r\n                    processElement(oldVN, newVN, container,anchor);\r\n                    //\u5BF9\u5143\u7D20\u5904\u7406\r\n                }else if(shapeFlag & ShapeFlags.COMPONENT){\r\n                    //\u5BF9\u7EC4\u4EF6\u7684\u5904\u7406\uFF0Cvue3\u4E2D\u51FD\u6570\u5F0F\u7EC4\u4EF6\u5E9F\u5F03\r\n                    processComponent(oldVN,newVN,container,anchor);\r\n                }\r\n           \r\n        }\r\n        \r\n        \r\n    }\r\n\r\n\r\n    const render = (vnode, container)=>{\r\n        //\u5B9A\u4E49\u6E32\u67D3\u884C\u4E3A\uFF0C\u5C06\u865A\u62DF\u8282\u70B9\u8F6C\u5316\u4E3A\u771F\u5B9E\u8282\u70B9\r\n\r\n        if(vnode == null){\r\n            if(container._vnode){\r\n                unmount(container._vnode);\r\n            }\r\n        }else{\r\n            patch(container._vnode || null,vnode,container);\r\n            container._vnode = vnode; //\u7F13\u5B58\u65E7\u7684\u865A\u62DF\u8282\u70B9\r\n        }\r\n \r\n    }; \r\n    return {\r\n        render //\u8FD4\u56DE\u6E32\u67D3\u5668\r\n    };\r\n}", "//\u63D0\u4F9B\u64CD\u4F5Cdom\u7684api\r\n//createRenderer \u521B\u5EFA\u4E00\u4E2A\u6E32\u67D3\u5668\uFF0C\u5B9A\u4E49\u6E32\u67D3\u884C\u4E3A\r\n//render \u8BBE\u7F6E\u6E32\u67D3\u51FD\u6570\r\n//h, createVNode\uFF0C\u521B\u5EFA\u4E00\u4E2A\u865A\u62DFdom\u8282\u70B9\r\n\r\nimport {nodeOps} from \"./nodeOps\";\r\nimport patchProp from \"./patchProp\";\r\nimport {createRenderer} from \"@simple-vue/runtime-core\"\r\n\r\nconst renderOptions = Object.assign({patchProp},nodeOps);\r\n\r\nexport const render = (vnode, container)=>{\r\n    return  createRenderer( renderOptions).render(vnode, container);\r\n}\r\nexport {renderOptions};\r\n\r\n \r\nexport * from \"@simple-vue/runtime-core\"\r\n"],
  "mappings": "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",
  "names": ["effect", "ref", "source", "effect", "job", "render", "renderOptions", "i", "render", "effect"]
}
